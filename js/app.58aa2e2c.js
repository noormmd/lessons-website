(function(){"use strict";var e={4296:function(e,t,r){var s=r(3751),o=r(641),n=r(33),a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAn9JREFUSEuNlVuIj1EUxX/jLve7oVEyL4YoNVIeRBG5lSmXlKmZSZkXUZRIPAxSaBp5kfslTxPyoJSax3lBRIkXpiRq3OU+s9fY/xz/vvN957zMN6d99tprr73XvwIYCPTn3+kBvgf/h58VQeyvSMx/13owH5gR3H4DOoFXGQkGAbP9/l4qwDmgzoMFKEZ6vDiDyUTgFFAJLEwFWAIs9+ChwFJgFLDRQDrKkihxu4EIKGQdxVLF4RltVe+x9mwFDgNHgX6A7qXTZOAiMAao9Yd/gA/Ab2c/PNDpRznAYGAlcAW46SymOKiSD3O2X4DbDvDOGJ8AntvdAmC9F6IheFIOoDfTTZNHwEMTewWwCDgJDAjY6PuNA3wCpONpZ70aUKtHAI+zACZ5G+YCW4C79niqVzUW2A9UBYOhkX7gBShO2ojFJuB4FsAQm6I1xuSCt2lDIFKRyMon8BvABGBVFoDoS8A73qZwXKXDJUAs50T2ZBlwHbivPFkAeqdEEroG2Oxt0r1EXgtMA45kAAj4vDGfBzQCt2IAGrUGG7sWS3YW2J6wVBrnWa7HU0D79ToGkNemGNZIYKftxA6JCxxUYAyg1KZrwExgm1eWR6RkI3IBWY8mKxdAgbu9KjFKOV+Bq15QX3weAyWVyHtd9BSAbm9NX/VFACkJC2NiDHQvX9K6/wTeF2b6ayUyRZmf4vU32iJts2y73vbgGXAIkOfEjpJrGOTEclbtyIs8gNKiaZbfuthaoNgZ50mbbCg+Am3AvjyA8eb5re6mLy3wgK9/DEATt8scttkBjjlItEX6cak2L1pnK99l35cTNBCItv+zGd6ZIg0S8qWF5O1BWoaCqF59cGwnHxxiKQAAAABJRU5ErkJggg==";const i={id:"app"},l={key:0},d=["onClick"],u={key:0,style:{color:"red"}},c={key:0,style:{color:"red"}},p={key:0,style:{color:"red"}},h=["disabled"],m={key:1},b={id:"SearchFunctionality"},v={id:"sortOptions"},y={id:"Lessons"},k={key:0},f={class:"lessonDescription"},L=["src"],A=["onClick","disabled"],g={key:1},C={id:"Lessons"},w={id:"lessonItems"},E={class:"lessonDescription"},N=["src"],O=["onClick","disabled"];function I(e,t,r,I,B,F){return(0,o.uX)(),(0,o.CE)("div",i,[(0,o.Lk)("header",null,[(0,o.Lk)("h1",null,(0,n.v_)(B.sitename),1)]),t[31]||(t[31]=(0,o.Lk)("title",null,"Coursework for Full Stack",-1)),t[32]||(t[32]=(0,o.Lk)("link",{href:"https://fonts.googleapis.com/css?family=Fraunces",rel:"stylesheet"},null,-1)),(0,o.Lk)("main",null,[(0,o.Lk)("a",{id:"cart",onClick:t[0]||(t[0]=(...e)=>F.toggleCart&&F.toggleCart(...e)),class:(0,n.C4)({disabled:B.cart.length<1})},[t[15]||(t[15]=(0,o.Lk)("img",{alt:"Cart",id:"carticon",src:a},null,-1)),(0,o.eW)(" "+(0,n.v_)(F.NOfItemsInCart)+" "+(0,n.v_)(B.cart.length>0?"View your cart":"No items in cart"),1)],2),B.cartVisible?((0,o.uX)(),(0,o.CE)("div",l,[t[19]||(t[19]=(0,o.Lk)("h2",null,"Shopping Cart",-1)),(0,o.Lk)("ul",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(B.cart,((e,t)=>((0,o.uX)(),(0,o.CE)("li",{key:t},[(0,o.eW)((0,n.v_)(e.subject)+" ",1),(0,o.Lk)("button",{onClick:r=>F.removeFromCart(t,e)},"Remove",8,d)])))),128))]),t[20]||(t[20]=(0,o.Lk)("h2",null,"Welcome to Checkout",-1)),(0,o.Lk)("p",null,[t[16]||(t[16]=(0,o.eW)(" First name: ")),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>B.order.firstname=e),onInput:t[2]||(t[2]=(...e)=>F.validateName&&F.validateName(...e)),placeholder:"Enter your name"},null,544),[[s.Jo,B.order.firstname]]),B.order.firstname&&!B.isNameValid?((0,o.uX)(),(0,o.CE)("span",u," Name must contain letters only. ")):(0,o.Q3)("",!0)]),(0,o.Lk)("p",null,[t[17]||(t[17]=(0,o.eW)(" Surname: ")),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>B.order.surname=e),onInput:t[4]||(t[4]=(...e)=>F.validateName&&F.validateName(...e)),placeholder:"Enter your name"},null,544),[[s.Jo,B.order.surname]]),B.order.surname&&!B.isNameValid?((0,o.uX)(),(0,o.CE)("span",c," Name must contain letters only. ")):(0,o.Q3)("",!0)]),(0,o.Lk)("p",null,[t[18]||(t[18]=(0,o.eW)(" Phone Number: ")),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=e=>B.order.phonenumber=e),onInput:t[6]||(t[6]=(...e)=>F.validatePhone&&F.validatePhone(...e)),placeholder:"Enter your phone number"},null,544),[[s.Jo,B.order.phonenumber]]),B.order.phonenumber&&!B.isPhoneValid?((0,o.uX)(),(0,o.CE)("span",p," Phone number must contain numbers only. ")):(0,o.Q3)("",!0)]),t[21]||(t[21]=(0,o.Lk)("p",null,"Email:",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=e=>B.order.email=e)},null,512),[[s.Jo,B.order.email]]),t[22]||(t[22]=(0,o.Lk)("p",null,"Zip/Postcode:",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=e=>B.order.postcode=e)},null,512),[[s.Jo,B.order.postcode]]),t[23]||(t[23]=(0,o.Lk)("p",null,"Address:",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[9]||(t[9]=e=>B.order.address=e)},null,512),[[s.Jo,B.order.address]]),t[24]||(t[24]=(0,o.Lk)("h2",null," Order Information ",-1)),(0,o.Lk)("p",null,"Name: "+(0,n.v_)(B.order.firstname),1),(0,o.Lk)("p",null,"Surname: "+(0,n.v_)(B.order.surname),1),(0,o.Lk)("p",null,"Phone number: "+(0,n.v_)(B.order.phonenumber),1),(0,o.Lk)("p",null,"Email: "+(0,n.v_)(B.order.email),1),(0,o.Lk)("p",null,"Zip/Postcode: "+(0,n.v_)(B.order.postcode),1),(0,o.Lk)("p",null,"Deliver to address: "+(0,n.v_)(B.order.address),1),(0,o.eW)(" "+(0,n.v_)(B.order.lesson)+" ",1),(0,o.Lk)("button",{disabled:!F.isFormValid,onClick:t[10]||(t[10]=(...e)=>F.submitCheckoutButton&&F.submitCheckoutButton(...e))},"Place Order",8,h)])):((0,o.uX)(),(0,o.CE)("div",m,[(0,o.Lk)("div",b,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>B.searchQuery=e),type:"text",id:"searchBar",placeholder:"Search lessons"},null,512),[[s.Jo,B.searchQuery]]),(0,o.Lk)("button",{id:"searchButton",onClick:t[12]||(t[12]=(...e)=>F.searchLessons&&F.searchLessons(...e))},"Search")]),(0,o.Lk)("div",v,[t[27]||(t[27]=(0,o.Lk)("label",{for:"sortBy"},"Sort by:",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[13]||(t[13]=e=>B.sortBy=e)},t[25]||(t[25]=[(0,o.Lk)("option",{value:"subject"},"Subject",-1),(0,o.Lk)("option",{value:"location"},"Location",-1),(0,o.Lk)("option",{value:"price"},"Price",-1),(0,o.Lk)("option",{value:"availability"},"Availability",-1)]),512),[[s.u1,B.sortBy]]),t[28]||(t[28]=(0,o.Lk)("label",{for:"sortOrder"},"Order:",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[14]||(t[14]=t=>e.sortOrder=t)},t[26]||(t[26]=[(0,o.Lk)("option",{value:"asc"},"Ascending",-1),(0,o.Lk)("option",{value:"desc"},"Descending",-1)]),512),[[s.u1,e.sortOrder]])]),(0,o.Lk)("div",y,[B.searchResults.length>0?((0,o.uX)(),(0,o.CE)("div",k,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(B.searchResults,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.id,class:"lesson-item"},[(0,o.Lk)("h3",null,(0,n.v_)(e.subject),1),(0,o.Lk)("p",null,"Location: "+(0,n.v_)(e.location),1),(0,o.Lk)("p",null,"Price: £"+(0,n.v_)(e.price)+" per hour",1),(0,o.Lk)("p",f,(0,n.v_)(e.description),1),(0,o.Lk)("p",null,"Availability: "+(0,n.v_)(e.availability)+" spaces",1),(0,o.Lk)("img",{src:e.image,alt:"Lesson Image",class:"lesson-image"},null,8,L),(0,o.Lk)("button",{class:"addToCartButton",onClick:t=>F.addToCart(e),disabled:e.availability<1},(0,n.v_)(e.availability>0?"Add to Cart":"No spaces available"),9,A)])))),128))])):((0,o.uX)(),(0,o.CE)("div",g,t[29]||(t[29]=[(0,o.Lk)("p",null,"Nothing in search",-1)])))]),(0,o.Lk)("div",C,[(0,o.Lk)("div",w,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(F.sortedLessons,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.id,class:"lesson-item"},[(0,o.Lk)("h3",null,(0,n.v_)(e.subject),1),(0,o.Lk)("p",null,"Location: "+(0,n.v_)(e.location),1),(0,o.Lk)("p",null,"Price: £"+(0,n.v_)(e.price)+" per hour",1),(0,o.Lk)("p",E,(0,n.v_)(e.description),1),(0,o.Lk)("p",null,"Availability: "+(0,n.v_)(e.availability)+" spaces",1),(0,o.Lk)("img",{src:e.image,alt:"Lesson Image",class:"lesson-image"},null,8,N),t[30]||(t[30]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("button",{class:"addToCartButton",onClick:t=>F.addToCart(e),disabled:e.availability<1},(0,n.v_)(e.availability>0?"Add to Cart":"No spaces available"),9,O)])))),128))])])]))])])}r(4114),r(8992),r(2577),r(1454);var B={name:"App",components:{},data(){return{sitename:"Extra Lessons Store",lessons:[],cartVisible:!1,cart:[],lessonCategories:["English","Maths","Science","Geography"],order:{firstname:"",surname:"",phonenumber:"",email:"",postcode:"",address:"",lessonid:""},lesson:{lessonId:"",subject:"",location:"",price:0,description:"",availability:5,image:""},isNameValid:!1,isPhoneValid:!1,sortBy:"subject",searchQuery:"",sortedList:[],searchResults:[]}},methods:{validateName(){const e=/^[A-Za-z\s]+$/;this.isNameValid=e.test(this.order.firstname),this.isNameValid=e.test(this.order.surname)},validatePhone(){const e=/^[0-9]+$/;this.isPhoneValid=e.test(this.order.phonenumber)},async addToCart(e){e.availability>0?(this.cart.push({id:e.id,...e}),e.availability--,this.updateLessonAttribute(e.id,"availability",1),await this.updateLessonAvailability(e.id,-1)):alert("No spaces available for this lesson.")},toggleCart(){this.NOfItemsInCart>0?this.cartVisible=!this.cartVisible:alert("No items in cart to view. Please add to cart before you continue")},async updateLessonAttribute(e,t,r){try{const s=await fetch(`https://lessons-ecommerce-website-rest-api3.onrender.com/lessons/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({attribute:t,value:r})});if(!s.ok)throw new Error(`Error updating lesson attribute: ${s.statusText}`);const o=await s.json();console.log("Updated lesson:",o)}catch(s){console.error("Failed to update lesson:",s)}},removeFromCart(e,t){this.cart.splice(e,1);const r=this.lessons.find((e=>e.id===t.id));r&&r.availability++},submitCheckoutButton(){const e=/^[A-Za-z]+$/,t=/^[0-9]+$/;if(!e.test(this.order.firstname))return void alert("Name must contain letters only.");if(!e.test(this.order.surname))return void alert("Name must contain letters only.");if(!t.test(this.order.phonenumber))return void alert("Phone must contain numbers only.");if(!this.order.firstname||!this.order.surname||!this.order.phonenumber||!this.order.email||!this.order.address)return void alert("Please fill out all required fields.");const r={firstname:this.order.firstname,surname:this.order.surname,phonenumber:this.order.phonenumber,email:this.order.email,postcode:this.order.postcode,address:this.order.address,lessonIDs:this.cart.map((e=>e._id||e.lessonId))};fetch("https://lessons-ecommerce-website-rest-api3.onrender.com/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then((e=>{if(!e.ok)throw new Error("Failed to submit order. Please try again.");return e.json()})).then((e=>{alert("Order placed successfully!"),console.log("Order response:",e),this.cart=[],this.order={firstname:"",surname:"",phonenumber:"",email:"",postcode:"",address:"",lessonid:""}})).catch((e=>{console.error("Error submitting order:",e),alert("There was a problem placing your order. Please try again.")}))},async updateLessonAvailability(e,t){try{const r=await fetch(`https://lessons-ecommerce-website-rest-api3.onrender.com/lessons/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({increment:t})});if(!r.ok)throw new Error(`Error updating lesson availability: ${r.statusText}`);console.log(`Lesson ${e} availability updated by ${t}`)}catch(r){console.error("Failed to update availability:",r)}},async searchLessons(){try{console.log("Lessons:",this.lessons);const e=await fetch(`https://lessons-ecommerce-website-rest-api3.onrender.com/search?query=${this.searchQuery}`);if(!e.ok)throw new Error("Failed to fetch search results");const t=await e.json();this.searchResults=t}catch(e){console.error("Error searching lessons:",e)}}},computed:{isFormValid(){const e=/^[A-Za-z]+$/,t=/^[0-9]+$/;return e.test(this.order.firstname)&&e.test(this.order.surname)&&t.test(this.order.phonenumber)},NOfItemsInCart(){return this.cart.length},isAvailable(){return this.lessons.availability>this.NOfItemsInCart},sortedLessons(){const e=[...this.lessons];return e.sort(((e,t)=>"price"===this.sortBy?e.price-t.price:"availability"===this.sortBy?e.availability-t.availability:"subject"===this.sortBy||"location"===this.sortBy?e[this.sortBy].localeCompare(t[this.sortBy]):void 0)),"desc"===this.sortOrder&&e.reverse(),e}},created:function(){const e=this;fetch("https://lessons-ecommerce-website-rest-api3.onrender.com/lessons").then((function(t){t.json().then((function(t){alert("Successfully connected to server"),console.log(t),e.lessons=t}))}))},isCartNotEmpty(){return this.cart.length>0}},F=r(6262);const V=(0,F.A)(B,[["render",I]]);var x=V;(0,s.Ef)(x).mount("#app")}},t={};function r(s){var o=t[s];if(void 0!==o)return o.exports;var n=t[s]={exports:{}};return e[s].call(n.exports,n,n.exports,r),n.exports}r.m=e,function(){var e=[];r.O=function(t,s,o,n){if(!s){var a=1/0;for(u=0;u<e.length;u++){s=e[u][0],o=e[u][1],n=e[u][2];for(var i=!0,l=0;l<s.length;l++)(!1&n||a>=n)&&Object.keys(r.O).every((function(e){return r.O[e](s[l])}))?s.splice(l--,1):(i=!1,n<a&&(a=n));if(i){e.splice(u--,1);var d=o();void 0!==d&&(t=d)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[s,o,n]}}(),function(){r.d=function(e,t){for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};r.O.j=function(t){return 0===e[t]};var t=function(t,s){var o,n,a=s[0],i=s[1],l=s[2],d=0;if(a.some((function(t){return 0!==e[t]}))){for(o in i)r.o(i,o)&&(r.m[o]=i[o]);if(l)var u=l(r)}for(t&&t(s);d<a.length;d++)n=a[d],r.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return r.O(u)},s=self["webpackChunkmy_vue_app"]=self["webpackChunkmy_vue_app"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=r.O(void 0,[504],(function(){return r(4296)}));s=r.O(s)})();
//# sourceMappingURL=app.58aa2e2c.js.map